<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Of Code &amp; Systems</title><link>/</link><description>Recent content on Of Code &amp; Systems</description><generator>Hugo -- gohugo.io</generator><language>ru-RU</language><lastBuildDate>Tue, 29 Sep 2020 15:29:00 +0300</lastBuildDate><atom:link href="/index.xml" rel="self" type="application/rss+xml"/><item><title>Kubernetes What If...?</title><link>/2020/09/kubernetes-what-if/</link><pubDate>Tue, 29 Sep 2020 15:29:00 +0300</pubDate><guid>/2020/09/kubernetes-what-if/</guid><description>&lt;h1 id="--">Что произойдёт, если&lt;/h1>
&lt;h2 id="-kubelet">Перезапустить kubelet&lt;/h2>
&lt;p>Контейнеры продолжают работать, но в момент синхронизации состояния подов с api-server поды могут переходить в состояние 0/1 Running, когда трафик на них перестаёт направляться&lt;/p>
&lt;h2 id="-kubelet1">Остановить kubelet&lt;/h2>
&lt;p>Нода переходит в состояние NotReady, никаких событий на подах не происходит - они продолжают пребывать в состоянии 1/1 Running, но трафик на них перестаёт идти (из endpoint'ов сервисов удаляются IP адрес подов, которые находятся на &amp;ldquo;мёртвой&amp;rdquo; ноде).&lt;/p>
&lt;p>Спустя указанный pod-eviction-timeout (5m по-умолчанию) для &lt;a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/">kube-controller-manager&lt;/a> поды переходят в статус Terminating и начинают запускаться на живых воркерках. Поды &lt;a href="https://github.com/kubernetes/kubernetes/issues/55713">будут продолжать&lt;/a> находиться в статусе Terminating либо до старта kubelet, либо до удаления ноды из кластера. При этом не выгоняются поды DaemonSet и поды, поднятые kubelet'ом(kube-proxy, nginx-proxy, kube-flannel, nodelocaldns и т.п.)&lt;/p></description></item><item><title>Graceful Shutdown в Akka HTTP</title><link>/2020/09/scala-akka-graceful-shutdown/</link><pubDate>Tue, 22 Sep 2020 18:53:00 +0300</pubDate><guid>/2020/09/scala-akka-graceful-shutdown/</guid><description>&lt;p>Атуально для Akka HTTP начиная с версии &lt;a href="https://doc.akka.io/docs/akka-http/current/release-notes/10.2.x.html">10.2.0&lt;/a>&lt;/p>
&lt;p>Github Issue: &lt;a href="https://github.com/akka/akka-http/pull/3142">Add coordinated shutdown support&lt;/a>&lt;/p>
&lt;p>По-умолчанию, Akka при завершении (в т.ч. получении SIGTERM) запускает процесс &lt;a href="https://doc.akka.io/docs/akka/current/coordinated-shutdown.html">Coordinated Shutdown&lt;/a>, в рамках которого происходят последовательно несколько фаз:&lt;/p>
&lt;ul>
&lt;li>before-service-unbind&lt;/li>
&lt;li>service-unbind&lt;/li>
&lt;li>service-requests-done&lt;/li>
&lt;li>service-stop&lt;/li>
&lt;li>before-cluster-shutdown&lt;/li>
&lt;li>cluster-sharding-shutdown-region&lt;/li>
&lt;li>cluster-leave&lt;/li>
&lt;li>cluster-exiting&lt;/li>
&lt;li>cluster-exiting-done&lt;/li>
&lt;li>cluster-shutdown&lt;/li>
&lt;li>before-actor-system-terminate&lt;/li>
&lt;li>actor-system-terminate&lt;/li>
&lt;/ul>
&lt;p>В каждой фазе выполняются определённые действия и настроен таймаут, который можно переопределить и в течение которого эти действия должны завершиться. Если действия не успевают завершаться, то фаза заканчивается и начинается следующая&lt;/p>
&lt;p>В рамках Akka HTTP нас в первую очередь интересуют следующие фазы&lt;/p>
&lt;ul>
&lt;li>service-unbind #перестаёт слушаться tcp порт и перестают приниматься новые соединения. Установленные соединения не разрываются&lt;/li>
&lt;li>service-requests-done #ожидается окончание запросов, которые в данный момент обрабатываются кодом и клиент ожидает на них ответ&lt;/li>
&lt;li>service-stop #закрываются все установленные соединения&lt;/li>
&lt;/ul>
&lt;p>По-умолчанию (&lt;a href="https://github.com/akka/akka/blob/master/akka-actor/src/main/resources/reference.conf#L1162">default-phase-timeout = 5s&lt;/a>), после unbind есть 5 секунд на завершение текущих запросов&lt;/p>
&lt;p>При использовании Kubernetes, стоит принимать во внимание также его таймаут &lt;a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.18/#podspec-v1-core">terminationGracePeriodSeconds&lt;/a>, в течение которого будет ожидаться реакция на SIGTERM, после чего будет послан SIGKILL. По-умолчанию, он равен 30s&lt;/p></description></item><item><title>Как определяются права пользователя в kubernetes?</title><link>/2020/06/kubernetes-rbac-add-user/</link><pubDate>Mon, 15 Jun 2020 22:00:24 +0300</pubDate><guid>/2020/06/kubernetes-rbac-add-user/</guid><description>&lt;h1 id="--rbac">Немного о RBAC&lt;/h1>
&lt;p>В kubernetes есть сущность, которая называется &lt;code>RoleBinding&lt;/code>. Она определяет, каким субъектам какая роль будет назначена. &lt;code>RoleBinding&lt;/code> действует в рамках &lt;code>namespace&lt;/code>, в котором она создана. Для разрешения действий во всех &lt;code>namespace&lt;/code> без ограничений необходимо создавать &lt;code>ClusterRoleBinding&lt;/code>, который является cluster-wide объектом.&lt;/p>
&lt;p>Пример RoleBinding&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">apiVersion&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>rbac.authorization.k8s.io/v1&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>kind&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>RoleBinding&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>metadata&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>name&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>edit&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>namespace&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>project-a-devel&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>subjects&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>-&lt;span class="w"> &lt;/span>kind&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Group&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>name&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>sre&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>apiGroup&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>rbac.authorization.k8s.io&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>roleRef&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>kind&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ClusterRole&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>name&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>edit&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>apiGroup&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>rbac.authorization.k8s.io&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Эта роль:&lt;/p>
&lt;ul>
&lt;li>Действует в рамках namespace &lt;code>project-a-devel&lt;/code> - (metadata:)&lt;/li>
&lt;li>Применяется к пользователям в группе &lt;code>sre&lt;/code> (&lt;code>/O=sre&lt;/code>) - (subjects:)&lt;/li>
&lt;li>Разрешает действия, описанные в созданной по-умолчанию кластерной роли (ClusterRole) &lt;code>edit&lt;/code> - (roleRef:)&lt;/li>
&lt;/ul></description></item><item><title>Как избежать запуска двойного pipeline при использовании merge requests pipelines?</title><link>/2020/06/gitlab-avoid-double-pipeline-run/</link><pubDate>Mon, 15 Jun 2020 21:00:24 +0300</pubDate><guid>/2020/06/gitlab-avoid-double-pipeline-run/</guid><description>&lt;p>&lt;a href="https://docs.gitlab.com/ee/ci/merge_request_pipelines/">Пайплайны для Merge Requests&lt;/a> существуют отдельно (имеют лейбл detached) и запускается независимо от основного pipeline. Из-за этого если сделать push в репу в ветку, из которой в гитлабе есть открытый МР, то запускаются 2 одинаковых пайплайна&lt;/p>
&lt;p>&lt;img src="/wp-content/uploads/2020/06/double-pipeline.png" alt="">
 
Есть варианта, чтобы это избежать:&lt;/p>
&lt;ol>
&lt;li>Дублировать все джобы через extends, чтобы разделить на запускаемые на МРах и на обычные&lt;/li>
&lt;li>Не запускать CI на некоторых ветках, пока из них нет открытого МРа&lt;/li>
&lt;/ol></description></item><item><title>Организация деплоя в множество окружений с помощью helmfile</title><link>/2020/03/helmfile-ogranization/</link><pubDate>Wed, 04 Mar 2020 23:32:24 +0300</pubDate><guid>/2020/03/helmfile-ogranization/</guid><description>&lt;p>&lt;a href="https://github.com/roboll/helmfile">Helmfile&lt;/a> - обёртка для &lt;a href="https://github.com/helm/helm/">helm&lt;/a>, которая позволяет в одном месте описывать множество helm релизов, параметризовать их чарты для нескольких окружений, а также задавать порядок их деплоя.&lt;/p>
&lt;p>О самом helmfile и примерах его использования можно почитать в &lt;a href="https://github.com/roboll/helmfile/blob/master/README.md">readme&lt;/a> и &lt;a href="https://github.com/roboll/helmfile/blob/master/docs/writing-helmfile.md">best practices guide&lt;/a>.&lt;/p>
&lt;p>Мы же познакомимся с неочевидными способами описать релизы в helmfile&lt;/p>
&lt;p>Допустим, у нас есть пачка helm-чартов (для примера пусть будет postgres и некое backend приложение) и несколько окружений (несколько kubernetes кластеров, несколько namespace'ов или несколько и того, и другого). Берём helmfile, читаем документацию и начинаем описывать наши окружения и релизы:&lt;/p>
&lt;pre>&lt;code> .
├── envs
│   ├── devel
│   │   └── values
│   │   ├── backend.yaml
│   │   └── postgres.yaml
│   └── production
│   └── values
│   ├── backend.yaml
│   └── postgres.yaml
└── helmfile.yaml
&lt;/code>&lt;/pre></description></item><item><title>Немного о настройках при работе с Kafka, на которые стоит обратить внимание</title><link>/2020/03/kafka-recommendations/</link><pubDate>Mon, 02 Mar 2020 08:32:24 +0300</pubDate><guid>/2020/03/kafka-recommendations/</guid><description>&lt;figure class="img">
&lt;img src="/wp-content/uploads/2020/03/kafka-logo.png" width="325px" height="97px"/>
&lt;/figure>
&lt;p>Этот пост - небольшой конспект доклада с Highload &lt;a href="https://www.youtube.com/watch?v=m5CDfrQLzrs">&lt;strong>Кафка. &amp;ldquo;Описание одной борьбы&amp;rdquo; / Денис Карасик (Badoo)&lt;/strong>&lt;/a>. Как ясно из заголовка статьи, здесь будет рассказано о некоторых важных параметрах конфигурации брокеров, топиков и producer'ов&lt;/p></description></item><item><title>Проблема безопасности SSH Agent Forwarding</title><link>/2019/12/problema-bezopasnosti-ssh-agent-forwarding/</link><pubDate>Fri, 06 Dec 2019 19:02:24 +0000</pubDate><guid>/2019/12/problema-bezopasnosti-ssh-agent-forwarding/</guid><description>&lt;p>Вот что говорит нам &lt;code>man ssh_config&lt;/code> про &lt;code>ForwardAgent&lt;/code>(перевод):&lt;/p>
&lt;blockquote>
&lt;p>Agent forwarding нужно включать с осторожностью. Пользователи, которые смогут обойти настройки разрешений файлов на удалённом хосте (в частности для unix-socket агента (ssh-agent)) могут получить доступ к локальному агенту через перенаправленное(forwarded)-соединение. Атакующий не сможет вытащить сами ключи из агента, однако получит возможность проводить с ключами действия, позволяющие ему проходить аутентификацию, используя загруженные в агент идентификаторы&lt;/p>
&lt;/blockquote>
&lt;p>Просто запомните: если ваш бастион(&lt;em>прим. пер.:&lt;/em> &lt;a href="https://en.wikipedia.org/wiki/Jump_server">jump box&lt;/a> - сервер-бастион для доступа в закрытый сетевой контур) скомпроментирован, и вы используете SSH agent forwarding, чтобы через него подключаться к другим машинам, то высок риск компроментации и этих удалённых машин.&lt;/p>
&lt;p>Вместо этого лучше используйте &lt;code>ProxyCommand&lt;/code> или &lt;code>ProxyJump&lt;/code> (добавлен в OpenSSH 7.3). В таком случае ssh перенаправит TCP-соединение на удалённую машину через бастион, а само соединение будет установлено с вашей локальной машины. Если кто-нибудь на бастионе попробует провести MITM (man-in-the-middle) атаку на ваше соединение, то ssh об этом предупредит (&lt;em>прим. пер.: видимо, речь идёт о предупреждении об изменившимся ssh fingerprint(отпечатке)&lt;/em>)&lt;/p></description></item><item><title>Планирование резервного копирования с использованием backupninja</title><link>/2019/12/planirovanie-rezervnogo-kopirovanija-s-ispolzovaniem-backupninja/</link><pubDate>Fri, 06 Dec 2019 18:23:35 +0000</pubDate><guid>/2019/12/planirovanie-rezervnogo-kopirovanija-s-ispolzovaniem-backupninja/</guid><description>&lt;figure class="img">
&lt;img src="/wp-content/uploads/2019/12/rect33301.png" width="120px" height="120px"/>
&lt;/figure>
&lt;blockquote>
&lt;p>Эта заметка - перепечатка своего ответа на &lt;a href="https://toster.ru/answer?answer_id=1007582">вопрос в сервисе toster.ru&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Искал решение для планирование резервных копий различными утилитами на различные хранилища и остановился на &lt;!-- raw HTML omitted -->backupninja&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>Умеет по расписанию бэкапить БД и файлы и отправлять их на сторонний сервер разными способами, включая rsync, rdiff, duplicity&lt;/p>
&lt;p>В /etc/backup.d/ создаёте конфиги вида 10-db.mysql , 50-ftp.dup&lt;/p>
&lt;p>Числа в начале файла описывают очерёдность выполнения в случае одновременного запуска (сначала сдампить базу, а затем заливать из папки с архивом на ftp).&lt;/p>
&lt;p>Расширение файла указывает на тип задачи (.mysql - бэкап mysql, .dup - используем duplicity)&lt;/p></description></item><item><title>Kubernetes NodePort / LoadBalancer / Ingress? Когда что использовать?</title><link>/2019/01/kubernetes-nodeport-loadbalancer-ingress-kogda-chto-ispolzovat/</link><pubDate>Mon, 07 Jan 2019 22:47:36 +0000</pubDate><guid>/2019/01/kubernetes-nodeport-loadbalancer-ingress-kogda-chto-ispolzovat/</guid><description>&lt;p>Чем отличаются всякие там &lt;strong>NodePorts&lt;/strong>, &lt;strong>LoadBalancer&lt;/strong> и &lt;strong>Ingress&lt;/strong>? Все они дают возможность внешнему трафику попасть в ваш кластер, но дают эту возможность по-разному. Давайте-ка разберёмся, как они это делают и когда какой тип сервиса лучше использовать.&lt;/p>
&lt;h1 id="clusterip">ClusterIP&lt;/h1>
&lt;p>ClusterIP — это дефолтный тип сервиса в кубах, он поднимает вам сервис внутри кластера на внутрекластеровом IP. Доступа для внешнего трафика нет, только внутри кластера.&lt;/p>
&lt;p>YAML для ClusterIP выглядит как-то так:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">apiVersion&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>v1&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>kind&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>Service&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>metadata&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>name&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>my-internal-service&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>spec&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>selector&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>app&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>my-app&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>type&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>ClusterIP&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>ports&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>-&lt;span class="w"> &lt;/span>name&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>http&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>port&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>targetPort&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>protocol&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>TCP&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;ldquo;Так, ну и зачем же рассказывать нам о ClusterIP, если он не принимает внешний трафик?&amp;rdquo; — спросите вы. А всё потому, что попасть на этот сервис можно через Kubernetes proxy!&lt;/p></description></item><item><title>dapp — утилита для сборки и деплоя контейнеров. Особенности работы</title><link>/2018/12/dapp-utilita-dlja-sborki-i-deploja-kontejne/</link><pubDate>Mon, 03 Dec 2018 22:54:56 +0000</pubDate><guid>/2018/12/dapp-utilita-dlja-sborki-i-deploja-kontejne/</guid><description>&lt;figure class="img">
&lt;img src="/wp-content/uploads/2018/12/logo_og-e1543878630388.png"/>
&lt;/figure>
&lt;p>&lt;a href="https://github.com/flant/dapp">dapp&lt;/a> — утилита от российской компании Флант, которая занимается внедрением devops-практик (kubernetes, ci/cd и всё такое, ну вы в курсе) Подробное описание можно прочитать на &lt;a href="https://habr.com/company/flant/blog/333682/">Хабре&lt;/a>, а я бы хотел остановиться на некоторых особенностях работы с ней при сборке образов (здесь и далее под образом подразумевается docker image)&lt;/p>
&lt;p>На момент написания статьи актуальная версия dapp 0.36.*&lt;/p>
&lt;p>В качестве примера для наглядности и понимания общей картины возьмём за основу немного урезанное содержимое &lt;strong>dappfile.yaml&lt;/strong> из &lt;a href="https://flant.github.io/dapp/how_to/getting_started.html">официальной документации&lt;/a>&lt;/p></description></item><item><title>TinyMCE 4. Управляем настройками редактора через data-* атрибуты HTML</title><link>/2018/03/tinymce-4-upravljaem-nastrojkami-redaktora-che/</link><pubDate>Mon, 26 Mar 2018 20:25:43 +0000</pubDate><guid>/2018/03/tinymce-4-upravljaem-nastrojkami-redaktora-che/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2018/03/2018-03-30_10-06-02.png" alt="">&lt;/p>
&lt;p>Представьте, что у вас есть сайт. А на этом сайте у вас подключен TinyMCE. Да подключен не к одному textarea, а к пачке разных, и надо сделать так, чтобы на разных textarea были разные настройки. Что в первую очередь приходит в голову? Правильно! Наделаем разных классов и будем по css-селекторам создавать разные инстансы. А что получим в итоге? Тоже правильно! Лапша в коде&lt;/p>
&lt;p>Сделаем по-умному&lt;/p></description></item><item><title>Получаем wildcard сертификаты LetsEncrypt</title><link>/2018/03/poluchaem-wildcard-sertifikaty-letsencrypt/</link><pubDate>Mon, 26 Mar 2018 19:38:38 +0000</pubDate><guid>/2018/03/poluchaem-wildcard-sertifikaty-letsencrypt/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2018/03/1469013377_letsencrypt-logo-horizontal.png" alt="">&lt;/p>
&lt;p>13 март 2018 года LetsEncrypt наконец &lt;a href="https://community.letsencrypt.org/t/acme-v2-and-wildcard-certificate-support-is-live/55579">объявила&lt;/a>, что, они начали поддерживать wildcard-сертификаты. Теперь можно за раз получить сертификат, включащий в себя все субдомены&lt;/p>
&lt;p>&lt;img src="/wp-content/uploads/2018/03/2018-03-26_22-22-42.png" alt="">&lt;/p>
&lt;p>Процесс всё так же автоматизирован через консольную утилиту certbot. Отличие в том, что теперь подтверждение домена можно сделать только через TXT-запись в DNS-зоне, а не через webroot, как раньше.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Качаем обновлённый certbot v0.22, разархивируем, переходим в папку&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">wget &lt;span class="s1">&amp;#39;https://github.com/certbot/certbot/archive/v0.22.2.tar.gz&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>tar -xvf v0.22.2.tar.gz &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>&lt;span class="nb">cd&lt;/span> certbot-0.22.2
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>Summernote. Автоформатирование при просмотре исходного кода</title><link>/2017/09/summernote-code-view-html-autoformat/</link><pubDate>Tue, 19 Sep 2017 16:28:56 +0000</pubDate><guid>/2017/09/summernote-code-view-html-autoformat/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2017/09/2018-03-30_10-22-16.png" alt="">&lt;/p>
&lt;p>В summernote для codeview используется &lt;a href="https://github.com/codemirror/codemirror">codemirror&lt;/a>, так что нам надо, чтобы сам summernote расставил переносы строк (prettifyHtml: true), а средствами codemirror`а мы уже сделаем отступы.&lt;/p></description></item><item><title>Быстрый перенос базы mysql на другой сервер с помощью percona xtrabackup</title><link>/2017/08/bystryj-perenos-bd-s-pomoshhju-percona-xtrabackup-na-dru/</link><pubDate>Sat, 19 Aug 2017 22:37:01 +0000</pubDate><guid>/2017/08/bystryj-perenos-bd-s-pomoshhju-percona-xtrabackup-na-dru/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2017/08/pxb-logo.png" alt="">&lt;/p>
&lt;p>По мотивам &lt;a href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/partial_backups_innobackupex.html">официального мануала&lt;/a>&lt;/p>
&lt;p>Скорость переноса данных, по сравнению с обычными консольными dump / restore просто колоссальная, т.к. переносятся целиком файлы таблиц.&lt;/p>
&lt;p>Особенность в том, что на целевом сервере не должно быть рабочей mysql с нужными данными&lt;/p>
&lt;p>На серверах должен быть установлен &lt;a href="https://www.percona.com/software/mysql-database/percona-xtrabackup">Percona XtraBackup&lt;/a>&lt;/p>
&lt;p>&lt;strong>Source server&lt;/strong>&lt;/p>
&lt;p>Делаем частичный бэкап (partial backup), указывая опцию -database, где через пробел перечисляем базы для бэкапа. Важным моментов является то, что необходимо забрать и базу mysql для сохранения учётных записей и разрешений&lt;/p></description></item><item><title>PHP профайлер tideways + xhgui</title><link>/2017/08/php-profajler-tideways-xhgui/</link><pubDate>Wed, 16 Aug 2017 18:47:54 +0000</pubDate><guid>/2017/08/php-profajler-tideways-xhgui/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2017/08/kstawdh9qq_e7ocb6wk-izoxqmg.png" alt="">&lt;/p>
&lt;h2 id="heading">Введение&lt;/h2>
&lt;p>Об удобстве использования профайлера, да ещё с графическим интерфейсом и говорить нечего, особенно когда надо найти узкие места под нагрузкой.&lt;/p>
&lt;p>&lt;a href="https://github.com/tideways/php-profiler-extension">tideways&lt;/a> - само расширение php для сбора данных о производительности кода&lt;/p>
&lt;p>&lt;a href="https://github.com/perftools/xhgui">xhgui&lt;/a> - графический веб-интерфейс (см. скриншот выше), который, помимо всего прочего, сохраняет данные профилирования в mongodb и затем использует их для вывода статистики&lt;/p></description></item><item><title>map в nginx</title><link>/2017/08/map-v-nginx/</link><pubDate>Wed, 16 Aug 2017 15:32:59 +0000</pubDate><guid>/2017/08/map-v-nginx/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2017/08/nginx.png" alt="">&lt;/p>
&lt;p>Кейс следующий:&lt;/p>
&lt;p>Есть запросы к API с передачей уникального токена в GET параметре. По этому токену (user_token=) имеются лимиты на запросы через &lt;a href="https://nginx.org/ru/docs/http/ngx_http_limit_req_module.html">limit_req_zone&lt;/a>, типа такого:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="k">limit_req_zone&lt;/span> &lt;span class="nv">$arg_user_token&lt;/span> &lt;span class="s">zone=token5:10m&lt;/span> &lt;span class="s">rate=12r/m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Необходимо для некоторых токенов отключить лимиты. Тут на помощь и приходит модуль &lt;a href="https://nginx.org/ru/docs/http/ngx_http_map_module.html">map&lt;/a> nginx. Он позволяет динамически получать переменную, значение которой будет зависеть от значений других, входных, переменных. Т.е., грубо говоря, мы имеем&lt;/p></description></item><item><title>Digital Ocean представил новые дроплеты с высокопроизводительными CPU</title><link>/2017/05/digital-ocean-predstavil-novye-droplety-s-vysoko/</link><pubDate>Tue, 02 May 2017 20:59:35 +0000</pubDate><guid>/2017/05/digital-ocean-predstavil-novye-droplety-s-vysoko/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2017/05/1200px-DigitalOcean_logo.svg_.png" alt="">&lt;/p>
&lt;p>Упало письмо с рассылкой от DO, в котором говорится что они анонсируют ранний доступ, по запросу, к новым типам дроплетов&lt;/p>
&lt;blockquote>
&lt;p>We're excited to share some big new products and capabilities, and other improvements you may have missed&lt;/p>
&lt;p>&lt;strong>High CPU Droplets: Early Access&lt;/strong>&lt;/p>
&lt;p>We are now offering early access to a new set Droplet Plans: High CPU Droplets.&lt;/p>
&lt;p>Focused on reliable high performance, High CPU Droplets are backed by a more powerful, best-in-class CPU, and won't have any overcommitment on the underlying physical resources.&lt;/p>
&lt;/blockquote></description></item><item><title>CentOS 7. Kernel panic — not syncing: Fatal machine check on current CPU</title><link>/2017/05/centos-7-kernel-panic-not-syncing-fatal-machine-check-on-current-cpu/</link><pubDate>Mon, 01 May 2017 18:55:07 +0000</pubDate><guid>/2017/05/centos-7-kernel-panic-not-syncing-fatal-machine-check-on-current-cpu/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2017/05/install-centos-7-logo.png" alt="">&lt;/p>
&lt;p>&lt;strong>Провайдер услуг&lt;/strong>: ovh&lt;/p>
&lt;p>&lt;strong>Проц&lt;/strong>: Intel Xeon D-1521&lt;/p>
&lt;p>&lt;strong>ОС&lt;/strong>: CentOS 7.3&lt;/p>
&lt;p>&lt;strong>Ядро&lt;/strong>: 3.14 кастомное от ovh&lt;/p>
&lt;p>Дело было на майских праздниках. Клиент, держащий сервис, написанный на php и использующий mysql как бд, попросил посмотреть, почему сервер внезапно перестаёт отвечать.&lt;/p>
&lt;p>Предположили, что дело может быть в высокой нагрузке и отваливается сеть. Но нет, нагрузка так себе, на интерфейсе максимум 300 pps, трафик низкий, память не кушается, проц процентов на 40% загружен. В процессе выяснилось, что сервер не только перестаёт отвечать, но и сам перезагружается.&lt;/p>
&lt;p>Ага! Настраиваем kdump. kdump не запускается на кастомном ядре 3.14 ovh. Ставим ванильное из родных реп&lt;/p></description></item><item><title>Недоверенные корневые сертификаты от налоговой (ФНС России) в вашей системе</title><link>/2017/04/nedoverennye-kornevye-sertifikaty-o/</link><pubDate>Fri, 21 Apr 2017 10:34:48 +0000</pubDate><guid>/2017/04/nedoverennye-kornevye-sertifikaty-o/</guid><description>&lt;p>Чтобы отправить декларацию от доходах 3-НДФЛ в ФНС, можно получить ключ неквалифицированной электронной подписи и его сертификат, сформированные онлайн и отправить декларацию через личные кабинет налогоплательщика.&lt;/p>
&lt;p>Если решите хранить ключ у себя на компьютере, то ФНС предложит установить «средства электронной подписи, которые установят в систему свои корневые сертификаты с неограниченными правами использования. А это означает, что ваша машина будет доверять любыми сертификатам, выпущенными удостоверяющим центром (УЦ), указанном в корневом сертификате.&lt;/p>
&lt;p>Проверить установленные недоверенные сертификаты можно с помощью утилиты RCC (&lt;a href="https://www.trustprobe.com/fs1/apps.html">https://www.trustprobe.com/fs1/apps.html&lt;/a>). Утилита запускается в юзер-спейсе без запроса админских прав и только читает сертификаты.&lt;/p>
&lt;p>&lt;strong>До установки средств электронной подписи&lt;/strong>&lt;/p>
&lt;p>&lt;img src="/wp-content/uploads/2017/08/01.png" alt="">&lt;/p>
&lt;p>&lt;strong>После установки средств электронной подписи&lt;/strong> появляется аж четыре корневых УЦ&lt;/p></description></item><item><title>SELinux на веб-сервере</title><link>/2017/04/selinux-na-veb-servere/</link><pubDate>Wed, 19 Apr 2017 15:00:10 +0000</pubDate><guid>/2017/04/selinux-na-veb-servere/</guid><description>&lt;h3 id="heading">Введение&lt;/h3>
&lt;p>Когда-то, настраивая nginx+php-fpm, я просто делал &lt;strong>setenforce 0&lt;/strong> или правил &lt;strong>/etc/selinux/config&lt;/strong>, перманентно отключая selinux на сервере&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>/etc/selinux/config&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="c1"># This file controls the state of SELinux on the system.&lt;/span>
&lt;span class="c1"># SELINUX= can take one of these three values:&lt;/span>
&lt;span class="c1"># enforcing - SELinux security policy is enforced.&lt;/span>
&lt;span class="c1"># permissive - SELinux prints warnings instead of enforcing.&lt;/span>
&lt;span class="c1"># disabled - No SELinux policy is loaded.&lt;/span>
&lt;span class="na">SELINUX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">disabled&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Теперь, наконец разобравшись, я понял, что никогда больше не буду выключать selinux&lt;/p></description></item><item><title>Thinstation 5. Делаем окно подключения для rdesktop</title><link>/2015/03/rdesktop-s-oknom-podkljuchenija-v-thinstation-5/</link><pubDate>Thu, 12 Mar 2015 18:00:00 +0000</pubDate><guid>/2015/03/rdesktop-s-oknom-podkljuchenija-v-thinstation-5/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2015/03/2018-03-30_10-58-24.png" alt="">&lt;/p>
&lt;p>Thinstation - великолепная платформа для сборки тонкого клиента. Но вот некоторые вещи приходится допиливать руками&amp;hellip;&lt;/p>
&lt;p>Ситуация такая: есть несколько серверов windows terminal server, где работают наши юзеры, и нам надо сделать балансировку при подключении юзеров. Для балансировки используем &lt;strong>haproxy&lt;/strong>. Нюанс в том, что мы хотим использовать балансировку по rdp-cookie, в котором в том числе передаётся **username. **Это нам даст попадание попадание пользователя на тот же сервер в ту же сессию, если у его тонкого клиента поменялся IP или пользователь заходит с соседнего тонкого клиента.&lt;/p>
&lt;p>Так в чём проблема? Мы не хотим использовать полноценный оконный менеджер, а по-умолчанию, окно подключения в thinstation есть только у freerdp, а вот при загрузке в сессию rdesktop нам через балансировщик бросает сразу на терминальный сервер в сессию, где уже выводится стандартная виндовая форма ввода логина-пароля. А нам нужен именно rdesktop&lt;/p>
&lt;p>Хитрость всего лишь в том, что необходимо подменить бинарник freerdp на бинарник rdesktop и добавить в сборку keymaps, чтобы в rdesktop корректно работала клавиатура&lt;/p></description></item><item><title>MS Exchange 2013. Пограничный сервер</title><link>/2015/03/ms-exchange-2013-pogranichnyj-server/</link><pubDate>Thu, 12 Mar 2015 17:43:00 +0000</pubDate><guid>/2015/03/ms-exchange-2013-pogranichnyj-server/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2015/03/microsoft-exchange-2013.png" alt="">&lt;/p>
&lt;h1 id="-edge--exchange-2013">Роль EDGE для Exchange 2013&lt;/h1>
&lt;h2 id="heading">Описание&lt;/h2>
&lt;p>Пограничный сервер, анализирующий соединения и письма, помечающий спам, блокирующий недоверенные внешние сервера и т.п.&lt;/p>
&lt;h2 id="heading1">Безопасность&lt;/h2>
&lt;h3 id="----">Чёрные и белые списки серверов&lt;/h3>
&lt;p>Пожалуй, самый простой, но не самый надёжный способ обезопасить себя от писем с &amp;ldquo;левых&amp;rdquo; почтовых серверов. При получении письма проверяется, не присутствует ли IP отправителя в одном списков.&lt;/p>
&lt;p>IP-адреса в списки можно добавлять вручную через powershell, также существуют сторонние сервисы, которые собирают информацию по доверенным и недоверенным IP-адресам.&lt;/p>
&lt;p>Сначала IP ищется в вручную созданных списках и только затем в списках сторонних провайдеров&lt;/p></description></item><item><title>Рекомендации по работе с Symantec Backup Exec 2010 R3</title><link>/2015/03/rekomendacii-po-rabote-s-symantec-backup-exec-2010-r3/</link><pubDate>Thu, 12 Mar 2015 17:36:00 +0000</pubDate><guid>/2015/03/rekomendacii-po-rabote-s-symantec-backup-exec-2010-r3/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2015/03/2018-03-30_11-00-18.png" alt="">&lt;/p>
&lt;h1 id="heading">Описание&lt;/h1>
&lt;h2 id="-devices">Устройства (Devices)&lt;/h2>
&lt;p>&lt;strong>Устройство&lt;/strong> - это физическое (магнитная лента, роботизированная библиотека) или виртуальное устройство (папка на жёстком диске), на которое происходит резервное копирование.&lt;/p>
&lt;p>На любом подключённом в Windows жёстком диске через Backup Exec можно создать такую папку, которая будет являться &lt;strong>устройством&lt;/strong> и будет иметь 2 важных параметра:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Максимальный размер&lt;/strong> создаваемых в папке файлов (каждый файл - носитель, на котором будут храниться резервные копии)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Количество &lt;strong>наборов данных (data sets)&lt;/strong>, которые могут быть записаны в файл (один набор данных = один выбранный ресурс в задании бэкапа. Каждый новый бэкап того же ресурса - новый набор данных)&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>FreePBX + Asternic CDR Reports + Recordings</title><link>/2014/09/freepbx-asternic-cdr-reports-recordings/</link><pubDate>Wed, 10 Sep 2014 12:54:00 +0000</pubDate><guid>/2014/09/freepbx-asternic-cdr-reports-recordings/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2014/09/2018-03-30_11-01-58.png" alt="">&lt;/p>
&lt;p>FreePBX, Asternic CDR Reports и записи звонков&lt;/p>
&lt;p>&lt;strong>ВВЕДЕНИЕ&lt;/strong>&lt;/p>
&lt;p>Классический CDR Reports, &amp;ldquo;идущий в комплекте&amp;rdquo; с FreePBX умеет делать отчёты с проигрыванием аудиозаписи, если она велась, но не умеет разграничивать доступы по Extension`ам (Extension Range, который задаётся при создании новой учётной записи админа).&lt;/p>
&lt;p>Модуль Asternic CDR Reports учитывает это, но не выводит аудиофайл.&lt;/p>
&lt;p>Исправим это.&lt;/p>
&lt;p>Информация о звонках в Asterisk`е хранится в mysql базе данных asteriskcdrdb, таблица cdr.&lt;/p></description></item><item><title>openSUSE 13.1 NetworkManager-l2tp</title><link>/2014/07/opensuse-13-1-networkmanager-l2tp/</link><pubDate>Wed, 02 Jul 2014 19:19:00 +0000</pubDate><guid>/2014/07/opensuse-13-1-networkmanager-l2tp/</guid><description>&lt;p>Исходники &lt;a href="https://github.com/seriyps/NetworkManager-l2tp">https://github.com/seriyps/NetworkManager-l2tp&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-bash" data-lang="bash">git clone https://github.com/seriyps/NetworkManager-l2tp.git
&lt;span class="nb">cd&lt;/span> NetworkManager-l2tp
./autogen.sh
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Nine Eagles 181 TOY NE RC 510A/512A</title><link>/2014/04/nine-eagles-181-toy-ne-rc-510a512a/</link><pubDate>Wed, 09 Apr 2014 19:50:00 +0000</pubDate><guid>/2014/04/nine-eagles-181-toy-ne-rc-510a512a/</guid><description>&lt;p>&lt;em>Этот пост написан, потому что по этой модели квадрокоптера в рунете ну очень мало информации, а мне пришлось столкнуться с мелким ремонтом и настройкой данного аппарата. Так что пускай изыскания не пропадут даром и помогут какому-нибудь &amp;ldquo;гуглящему&amp;rdquo;&amp;rdquo; человеку&lt;/em>&lt;/p>
&lt;p>Получил в подарок такой квадрокоптер:&lt;/p>
&lt;p>&lt;strong>Nine Eagles 181 TOY NE RC 512A&lt;/strong>*&lt;/p>
&lt;p>&lt;img src="/wp-content/uploads/2014/04/radioupravlyaemyj-kvadrokopter-nine-eagles-181-toy.jpg" alt="">&lt;/p>
&lt;p>Не буду вдаваться в подробности его описания и характеристик, скажу лишь только, что по корпусу и начинке это точная копия WLToys V222, причём, судя по всему, фирма Nine Eagles к этому коптеру не имеет вообще никакого отношения (не найдено ни одного доказательства в инете).&lt;/p>
&lt;p>Итак, к проблемам&amp;hellip;&lt;/p></description></item><item><title>Synology NAS</title><link>/2014/01/synology-nas/</link><pubDate>Fri, 31 Jan 2014 05:38:00 +0000</pubDate><guid>/2014/01/synology-nas/</guid><description>&lt;p>Эта заметка по Synology NAS. Обновляемая&lt;/p>
&lt;p>&lt;strong>Модель:&lt;/strong> RS812+&lt;/p>
&lt;p>Изначально ОС не установлена, она ставится после установки хотя бы одного HDD. Называется ОС &lt;a href="http://www.synology.com/ru-ru/dsm/index">DiskStation Manager (DSM)&lt;/a>. Представляет собой linux, соответственно можно включить ssh или telnet из веб-морды и зайти в консоль, где будут привычные команды.&lt;/p></description></item><item><title>Неправильный размер папок owncloud в freebsd x86</title><link>/2014/01/nepravilnyj-razmer-papok-owncloud-v-freebsd-x86/</link><pubDate>Sat, 25 Jan 2014 10:37:00 +0000</pubDate><guid>/2014/01/nepravilnyj-razmer-papok-owncloud-v-freebsd-x86/</guid><description>&lt;p>Так случилось, что появилась необходимость бэкапить накопленные архивы фотографий, поэтому поставил себе в jail на фряхе owncloud 6.0.0a. Ничего сложного в этом нет, кроме как необходимость собирать nginx, php и mysql с нужными модулями из исходников, т.к. в пакетах нет необходимого. Может как-нибудь в будущем накатаю пост об этом.&lt;/p>
&lt;p>Итак, в установленном и работающем ownCloud размеры синхронизированных папок отображаются неправильно: максимально показывается 2ГБ на папку, а общие занятое и свободное пространства неверные.&lt;/p></description></item><item><title>Windows Phone. Nokia Lumia AT&amp;T. Восстанавливаем Общий интернет (Tethering)</title><link>/2013/10/windows-phone-nokia-lumia-att-vosstanavlivaem-obshhij-interne/</link><pubDate>Thu, 10 Oct 2013 21:22:00 +0000</pubDate><guid>/2013/10/windows-phone-nokia-lumia-att-vosstanavlivaem-obshhij-interne/</guid><description>&lt;p>AT&amp;amp;T Unlocked Lumia 900 из США. Общий интернет работал, а потом внезапно пропал, а точнее при попытке его включить появлялась следующая ошибка:&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;Соединение не в общем доступе&lt;br>
Чтобы включить привязку на устройстве, откройте сайт att.com/mywireless или наберите номер 611.&amp;rdquo;&lt;br>
&amp;ldquo;Could not enable tethering, please go to att.com/mywireless or dial 611″&lt;/p>
&lt;/blockquote></description></item><item><title>Вышел Proxmox VE 3.0</title><link>/2013/05/vyshel-proxmox-ve-3-0/</link><pubDate>Tue, 21 May 2013 19:11:00 +0000</pubDate><guid>/2013/05/vyshel-proxmox-ve-3-0/</guid><description>&lt;p>&lt;strong>upd 28.05.13&lt;/strong>&lt;br>
Полностью зарелизили версию 3.0&lt;br>
Теперь можно создавать шаблоны для будущего удобного развёртывания и клонировать свои виртуальные машины.&lt;br>
Выдержка из &lt;a href="http://pve.proxmox.com/wiki/VM_Templates_and_Clones">proxmox wiki&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Templates&lt;/strong> - Templates are pre-configured operating system environments that deploy in a couple of clicks&lt;/li>
&lt;li>&lt;strong>Linked Clone&lt;/strong> - A linked clone VM requires less disk space but cannot run without access to the base VM Template&lt;/li>
&lt;li>&lt;strong>Full Clone&lt;/strong> - A full clone VM is a complete copy and is fully independant to the original VM or VM Template, but requires the same disk space as the original.&lt;/li>
&lt;/ul></description></item><item><title>Удобное крепление крышки объектива на шнурке/верёвке для зеркальной камеры</title><link>/2013/05/udobnoe-kreplenie-kryshki-obektiva-n/</link><pubDate>Thu, 16 May 2013 17:22:00 +0000</pubDate><guid>/2013/05/udobnoe-kreplenie-kryshki-obektiva-n/</guid><description>&lt;p>Довольно скоро после приобретения зеркалки Nikon D5000 с китовым объективом меня посетила мысль, что во время съёмки снимать у оного объектива крышку и искать для неё место в кармане/на плоскости/где-то ещё — неудобно и гораздо логичнее было бы оставлять висеть её на верёвке. Тогда, вооружившись зажигалкой и иголкой, я проплавил в пластиковой крышке отверстие, куда продел тонкую верёвку, другой конец которой был закреплён на металлическом ушке для обычного ремня.&lt;/p>
&lt;p>Однако после покупки второго объектива от этой конструкции пришлось избавиться, т.к. из-за того, что верёвка была жёстко привязана к крышке и самому фотоаппарату, а крышки от разных объективов отличались по размеру, каждый раз при смене объектива отвязывать её было бы крайне неудобно.&lt;/p></description></item><item><title>Меняем сетевое имя (hostname) устройства на Android (root required)</title><link>/2013/05/menjaem-setevoe-imja-hostname-ustrojstva-na-android-root-re/</link><pubDate>Wed, 15 May 2013 12:26:00 +0000</pubDate><guid>/2013/05/menjaem-setevoe-imja-hostname-ustrojstva-na-android-root-re/</guid><description>&lt;p>Как ясно из заголовка, нам потребуются рутованое устройство, а также эмулятор терминала на Android.&lt;/p></description></item><item><title>Выключение гостевых виртуальных машин Windows 7/2008 в KVM</title><link>/2013/05/vykljuchenie-gostevyh-virtualnyh-mash/</link><pubDate>Wed, 15 May 2013 10:00:00 +0000</pubDate><guid>/2013/05/vykljuchenie-gostevyh-virtualnyh-mash/</guid><description>&lt;p>KVM использует ACPI для подачи сигнала завершения в гостевую виртуальную машину, но по-умолчанию в Windows 7/2008 стоит запрет на завершение работы, если нет залогиневшегося пользователя.&lt;/p></description></item><item><title>Kaspersky Security Center "MMC не удается инициализировать оснастку"</title><link>/2013/05/kaspersky-security-center-mmc-ne-udaetsja-inicializirovat-os/</link><pubDate>Wed, 15 May 2013 09:47:00 +0000</pubDate><guid>/2013/05/kaspersky-security-center-mmc-ne-udaetsja-inicializirovat-os/</guid><description>&lt;p>В Kaspersky Security Center 9 при выборе пункта &amp;ldquo;Управляемые компьютеры&amp;rdquo; вылезает ошибка &amp;ldquo;MMC не удается инициализировать оснастку&amp;rdquo;. Лечится так:&lt;/p></description></item><item><title>Proxmox. Проброс usb-устройств в гостевую виртуальную машину. На примере ключей 1С HASP</title><link>/2012/10/proxmox-probros-usb-ustrojstv-v-gostevuju-virtu/</link><pubDate>Sat, 27 Oct 2012 12:51:00 +0000</pubDate><guid>/2012/10/proxmox-probros-usb-ustrojstv-v-gostevuju-virtu/</guid><description>&lt;p>&lt;em>обновлено 16.05.13&lt;/em>&lt;/p>
&lt;p>Немного теории о usb:&lt;/p>
&lt;p>&amp;ldquo;Физическое соединение устройств осуществляется по топологии многоярусной звезды. Центром каждой звезды является хаб, каждый кабельный сегмент соединяет две точки - хаб с другим хабом или с функцией. В системе имеется один (и только один) хост-контроллер, расположенный в вершине пирамиды устройств и хабов. Хост-контроллер интегрируется с корневым хабом (Root Hub), обеспечивающим одну или несколько точек подключения - портов.&amp;rdquo;&lt;/p>
&lt;blockquote>
&lt;p>&lt;a href="http://usb.fober.net/teoriya/Struktura-sistemy-USB/">Источник&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>Наша задача выяснить, на какой шине (bus) и к какому порту (port) подключены наши usb-устройства. В качестве примера приведён проброс двух ключей HASP 1С Предприятия 8 (серверный и клиентский)&lt;/p></description></item><item><title>GetSimple CMS 3.1 News Manager html-теги в анонсах</title><link>/2012/10/getsimple-cms-3-1-news-manager-html-tegi-v-anonsah/</link><pubDate>Wed, 17 Oct 2012 18:07:00 +0000</pubDate><guid>/2012/10/getsimple-cms-3-1-news-manager-html-tegi-v-anonsah/</guid><description>&lt;p>&lt;em>plugins/news_manager/inc/functions.php&lt;/em>&lt;br>
ищем функцию&lt;/p>
&lt;pre>&lt;code>function nm_create_excerpt($content)
&lt;/code>&lt;/pre>
&lt;p>комментируем&lt;/p>
&lt;pre>&lt;code>$content = strip_tags($content);
&lt;/code>&lt;/pre>
&lt;p>Теперь переводы строк, выделение жирным и пр. отображаются&lt;/p></description></item><item><title>Добавляем поле в форму обратной связи Joomla 1.5</title><link>/2012/09/dobavljaem-pole-v-formu-obratnoj-svjazi-jo/</link><pubDate>Thu, 06 Sep 2012 05:41:00 +0000</pubDate><guid>/2012/09/dobavljaem-pole-v-formu-obratnoj-svjazi-jo/</guid><description>&lt;p>&lt;img src="/wp-content/uploads/2012/09/01.png" alt="">&lt;/p>
&lt;p>Создаём дополнительное поле «Введите Ваш номер телефона» при отправке сообщения через обратную связь Joomla&lt;/p>
&lt;p>Изменяемые файлы:&lt;/p>
&lt;ul>
&lt;li>/components/contact.html.php&lt;/li>
&lt;li>/language/russian.php&lt;/li>
&lt;li>/language/english.php&lt;/li>
&lt;li>/components/contact.php&lt;/li>
&lt;/ul></description></item></channel></rss>